愛知県豊橋市の病院間連携で、地図にマッピングされた病院のダッシュボードを作成したい。
まずは要件定義をお願いします、患者連携リアルタイムで空き病床数がわかるシステム

病院間連携。カテゴライズして症状レベル単位の空き病床
訪問看護とも連携させる
開業医が病院にコンタクトできる
入院病床、外来の診療科ごとの空きコマ
などがわかるBIシステム


# 豊橋市 病院間連携BIダッシュボード — 要件定義書

まずは要件定義を整理します。かなり大規模なシステムですので、段階的に構造化していきますね。

---

## 1. プロジェクト概要

**システム名（仮）**: 豊橋メディカルネットワーク・ダッシュボード

**目的**: 豊橋市内の病院・診療所・訪問看護ステーション間で、病床・外来の空き状況をリアルタイムに共有し、患者の適切な搬送・紹介・連携を実現する地図ベースBIシステム

**対象エリア**: 愛知県豊橋市（将来的に東三河医療圏への拡大を想定）

---

## 2. ステークホルダー

| 利用者 | 主な利用シーン |
|---|---|
| **救急隊** | 搬送先の空き病床をリアルタイム検索 |
| **開業医（かかりつけ医）** | 紹介先病院への問い合わせ・予約 |
| **病院（地域連携室）** | 自院の空き状況の登録・他院の受入状況確認 |
| **訪問看護ステーション** | 急変時の受入先検索・退院患者の引継ぎ |
| **行政（豊橋市保健所等）** | 医療資源の需給モニタリング |

---

## 3. 機能要件

### 3.1 地図ダッシュボード（コア機能）

**地図マッピング**
- 豊橋市内の病院・診療所・訪問看護ステーションをGoogle Maps上にプロット
- 施設カテゴリ別アイコン（急性期病院 / 回復期病院 / クリニック / 訪問看護）
- 空き状況に応じたカラーコード表示（🟢空き十分 / 🟡残りわずか / 🔴満床）
- クリックで詳細パネル展開

**フィルタリング**
- 診療科別（内科・外科・整形外科・小児科・産婦人科 等）
- 症状レベル別（後述の重症度カテゴリ）
- 施設種別
- 距離・エリア

### 3.2 病床管理モジュール

**入院病床**

| 重症度カテゴリ | 対応病床 | 例 |
|---|---|---|
| **Level 1: 超急性期** | ICU / HCU / SCU | 心停止・多発外傷・脳卒中超急性期 |
| **Level 2: 急性期** | 一般急性期病床 | 肺炎入院・急性腹症・骨折手術 |
| **Level 3: 回復期** | 回復期リハ病床 | 脳卒中リハ・術後回復 |
| **Level 4: 慢性期/療養** | 療養病床 | 長期療養・終末期 |
| **Level 5: 精神科** | 精神科病床 | 精神科救急・措置入院 |

各カテゴリごとに表示する情報:
- 総病床数 / 使用中 / 空き数
- 本日の退院予定数（予測空き）
- 受入可否ステータス（医師が手動更新）

**外来（診療科ごとの空きコマ）**
- 診療科 × 日時のマトリクス表示
- 当日〜1週間先の予約可能コマ数
- 初診 / 再診 / 紹介の区分
- 専門外来の対応可否（例：糖尿病外来、ペースメーカー外来）

### 3.3 開業医→病院コンタクト機能

- **紹介状デジタル送信**: テンプレートベースの紹介状作成・送信
- **チャット / メッセージ**: 地域連携室との直接メッセージング
- **空き枠予約リクエスト**: ダッシュボードから直接予約枠をリクエスト
- **緊急コール**: ワンクリックで地域連携室の直通電話に発信
- **ステータストラッキング**: 紹介→受入→結果報告の進捗管理

### 3.4 訪問看護連携

- 訪問看護ステーションの対応エリアを地図上にオーバーレイ
- 各ステーションの受入可能状況（新規利用者枠）
- 退院調整連携: 病院→訪問看護への退院サマリー共有
- 急変時の受入先検索（3.2と連動）
- 訪問看護からの報告（バイタル異常等）をトリガーにした病院アラート

### 3.5 BI分析・レポート機能

- 病床稼働率トレンド（日次 / 週次 / 月次）
- 診療科別の紹介患者フロー（サンキーダイアグラム）
- 地域別の医療需要ヒートマップ
- 平均在院日数・回転率
- 連携実績レポート（開業医→病院の紹介件数等）

---

## 4. 非機能要件

| 項目 | 要件 |
|---|---|
| **リアルタイム性** | 病床データは最低15分間隔で更新（目標: 5分） |
| **可用性** | 99.9%（救急連携のため高可用性必須） |
| **セキュリティ** | 3省2ガイドライン準拠、患者個人情報は扱わない（匿名化された統計情報のみ） |
| **認証** | 施設単位のアカウント＋個人認証（多要素認証） |
| **データ連携** | HL7 FHIR対応（将来的な電子カルテ連携を想定） |
| **端末** | PC・タブレット・スマートフォン対応（レスポンシブ） |
| **同時接続** | 500ユーザー以上 |

---

## 5. 症状レベル × 施設マッチングロジック

```
患者の症状レベル判定
    ↓
Level 1-2 → 急性期病院（豊橋市民病院、豊橋医療センター等）
Level 3   → 回復期病院（リハビリ病院等）
Level 4   → 療養型病院・在宅（訪問看護連携）
Level 5   → 精神科対応施設
    ↓
地図上で該当施設を空き状況順にハイライト
    ↓
開業医がワンクリックでコンタクト
```

---

## 6. データソース

| データ | 更新方法 | 更新頻度 |
|---|---|---|
| 病床空き数 | 各病院の地域連携室が手動入力 or 電子カルテAPI連携 | 15分〜リアルタイム |
| 外来空きコマ | 予約システムAPI連携 or 手動入力 | 日次〜リアルタイム |
| 施設マスタ | 管理者が登録（住所・診療科・病床数等） | 随時 |
| 訪問看護空き | 各ステーションが手動入力 | 日次 |

---

## 7. 開発フェーズ案

| フェーズ | 内容 | 期間目安 |
|---|---|---|
| **Phase 1: MVP** | 地図表示 + 病床空き（手動入力）+ 施設情報閲覧 | 3ヶ月 |
| **Phase 2: コンタクト** | 開業医→病院メッセージ + 紹介状送信 | +2ヶ月 |
| **Phase 3: 外来連携** | 外来空きコマ表示 + 予約リクエスト | +2ヶ月 |
| **Phase 4: 訪問看護** | 訪問看護ステーション連携 | +2ヶ月 |
| **Phase 5: BI強化** | 分析ダッシュボード + レポート自動生成 | +2ヶ月 |
| **Phase 6: API連携** | 電子カルテ・予約システムとの自動連携 | +3ヶ月 |

---

## 8. 技術スタック案

| レイヤー | 技術 |
|---|---|
| フロントエンド | React + Mapbox GL JS or Google Maps API |
| BIダッシュボード | Recharts / D3.js（組み込み）or Looker Studio連携 |
| バックエンド | Node.js / Python FastAPI |
| データベース | PostgreSQL + PostGIS（地理空間データ） |
| リアルタイム通信 | WebSocket（Socket.io） |
| 認証 | Auth0 or Keycloak |
| インフラ | AWS or GCP（医療情報ガイドライン準拠リージョン） |

---

## 次のステップ

この要件定義をベースに、いくつかの方向で進められます：

1. **プロトタイプ作成** — 豊橋市の実際の病院データで地図ダッシュボードのデモを作る
2. **Notionに要件定義を格納** — プロジェクト管理用に整理
3. **画面設計（ワイヤーフレーム）** — 主要画面のUI設計
4. **提案資料作成** — 行政・病院向けのプレゼン資料

どこから着手しますか？まずはPhase 1のプロトタイプ（豊橋市の病院を地図にプロットして、モック病床データで動くデモ）を作るのが、関係者への説明にも有効だと思います。